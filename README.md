Surveillance-Platform-IIoT
You can select the location where the Node-Red platform will run, meaning you can choose to run the platform on your local PC or on a Raspberry Pi (instructions: https://nodered.org/docs/getting-started/raspberrypi) or in the cloud environment of Flowforge. Please note that if you choose to use the cloud, you'll need to create a free account on the Flowforge cloud environment website at https://app.flowforge.com/account/create to access Node-Red. In Flowforge, you can activate a free instance of Node-Red for 30 days, where you can install the Node-Red dashboard (Note: you won't set up billing details). For the MQTT broker, you can either use the Mosquitto broker installed on your local PC or on the Raspberry Pi, or you can use one of the available online brokers (e.g., broker.hivemq.com, test.mosquitto.org, ...). The IIoT node's microcontroller can be an Arduino with an Ethernet Shield, a WeMos, or an Arduino Wi-Fi board.

    IIoT Algorithm i. Initialize network sensor/actuator connections & MQTT broker. 
    ii. In each iteration of the infinite loop (loop), you will receive data from the DHT11 or DHT22 sensor (temperature, humidity, heat-index).
    The data will be sent via MQTT publish to Node-Red every 10 seconds. 
    iii. In case a flame is detected by the flame sensor (high-priority condition), the system responds immediately by rotating the SG90 servo motor's wing by 145 degrees 
    counterclockwise and then moving the wing 1 degree counterclockwise every 30 seconds until it reaches 180 degrees. Afterward, it returns the wing to the 0-degree position after 30 seconds. 
    If you don't have a flame sensor, use the LDR light sensor. Place a cover over the sensor (dark conditions), and when you remove the cover, it simulates the presence of a flame.] 
    iv. When a flame is detected, the IIoT node will send the value 1 or true via MQTT to Node-Red using the topic iiotnode\flamedetection and sound the buzzer or light the LED simultaneously until the step iii process is completed. v. When the IIoT node receives a signal from Node-Red via MQTT subscribing to the topic iiotnode\conditions with the value 1 or true (lower priority than the conditions in step 
    iii), it will sound the buzzer or light the LED and move the servo motor's wing by 5 degrees counterclockwise until it reaches 90 degrees. After 45 seconds, it immediately moves the wing to the 45-degree position counterclockwise and after 10 seconds, it returns the servo motor's wing to the 0-degree position with 9-degree steps and stops the buzzer or turns off the LED. Design in Node-Red i. Visualize real-time graphical representations in Node-Red (temperature vs. time), (humidity vs. time), (heat index vs. time). ii. Store temperature data in a database (SQLite) at regular intervals of 30 seconds in the Node-Red environment using the "litedb" node. iii. Using the "function" and "litedb" nodes in Node-Red, develop a JavaScript program (node function) that retrieves temperature values from the database for a 2-minute interval and calculates their average, saving it in a separate table in the SQLite DB. Then, display the last value of the average in the Node-Red UI (note: not a graphical representation). iv. Low-priority condition check: Check the current average with the previous average calculated and stored in the previous step (iii), and if the difference is greater than or equal to 2Â°C, publish the value 1 or true via MQTT to the topic iiotnode\conditions to the IIoT node and store the event's timestamp in a different table in the SQLite DB. Display the event's timestamp in the Node-Red UI (note: not a graphical representation). Note: Store data for at least 3 days. 
